@page "/purchasing/list-order"

@* <PageTitle>Purchase Order</PageTitle> *@

@* <section class="table-components"> *@
@*   <div class="container-fluid"> *@
@*     <!-- ========== title-wrapper start ========== --> *@
@*     <div class="title-wrapper pt-30"> *@
@*       <div class="row align-items-center"> *@
@*         <div class="col-md-6"> *@
@*           <div class="title mb-30"> *@
@*             <h2>Purchase Order</h2> *@
@*           </div> *@
@*         </div> *@
@*         <!-- end col --> *@
@*         <div class="col-md-6"> *@
@*           <div class="breadcrumb-wrapper mb-30"> *@
@*             <nav aria-label="breadcrumb"> *@
@*               <ol class="breadcrumb"> *@
@*                 <li class="breadcrumb-item"> *@
@*                   <a href="/">Dashboard</a> *@
@*                 </li> *@
@*                 <li class="breadcrumb-item"> *@
@*                   <a href="/purchasing">Purchasing</a> *@
@*                 </li> *@
@*                 <li class="breadcrumb-item active" aria-current="page"> *@
@*                   Purchase Order *@
@*                 </li> *@
@*               </ol> *@
@*             </nav> *@
@*           </div> *@
@*         </div> *@
@*         <!-- end col --> *@
@*       </div> *@
@*       <!-- end row --> *@
@*     </div> *@
@*     <!-- ========== title-wrapper end ========== --> *@
@* *@
@*     <!-- ========== tables-wrapper start ========== --> *@
@*     <div class="tables-wrapper"> *@
@*       <div class="row"> *@
@*         <div class="col-lg-12"> *@
@*           <div class="card-style mb-30"> *@
@*             <div class="title d-flex flex-wrap align-items-left justify-content-between"> *@
@*               <h6 class="mb-10">Purchase Order</h6> *@
@*               <div class="d-flex align-items-center"> *@
@*                 <h6>Status:</h6> *@
@*                 <div class="select-style-1 mb-0 ml-10"> *@
@*                   <div class="select-position"> *@
@*                     <select class="p-0 pe-5 border-0"> *@
@*                       <option value="" selected>Semua</option> *@
@*                       <option value="1">Pending</option> *@
@*                       <option value="2">Approved</option> *@
@*                       <option value="3">Received</option> *@
@*                       <option value="4">Rejected</option> *@
@*                       <option value="5">Completed</option> *@
@*                     </select> *@
@*                   </div> *@
@*                 </div> *@
@*               </div> *@
@*             </div> *@
@*             <TableToolbar/> *@
@*             <div class="table-wrapper table-responsive"> *@
@*               <table class="table"> *@
@*                 <thead> *@
@*                 <tr> *@
@*                   <th class="min-width"> *@
@*                     <h6>#</h6> *@
@*                   </th> *@
@*                   <th class="min-width"> *@
@*                     <h6>PO Number</h6> *@
@*                   </th> *@
@*                   <th class="min-width"> *@
@*                     <h6>PO Date</h6> *@
@*                   </th> *@
@*                   <th class="min-width"> *@
@*                     <h6>Vendor Target</h6> *@
@*                   </th> *@
@*                   <th class="min-width"> *@
@*                     <h6>Line Items</h6> *@
@*                   </th> *@
@*                   <th class="min-width"> *@
@*                     <h6>Total Amount</h6> *@
@*                   </th> *@
@*                   <th class="min-width"> *@
@*                     <h6>Status</h6> *@
@*                   </th> *@
@*                   <th> *@
@*                     <h6>Action</h6> *@
@*                   </th> *@
@*                 </tr> *@
@*                 <!-- end table row--> *@
@*                 </thead> *@
@*                 <tbody> *@
@*                 @foreach (var po in PurchaseOrders) *@
@*                 { *@
@*                   <tr> *@
@*                     <td> *@
@*                       <p>@po.PoheId</p> *@
@*                     </td> *@
@*                     <td> *@
@*                       <p>@po.PoNumber</p> *@
@*                     </td> *@
@*                     <td> *@
@*                       <p>@po.PoDate</p> *@
@*                     </td> *@
@*                     <td> *@
@*                       <p>@po.VendorTarget</p> *@
@*                     </td> *@
@*                     <td> *@
@*                       <p>@po.LineItems</p> *@
@*                     </td> *@
@*                     <td> *@
@*                       <p>@po.TotalAmount</p> *@
@*                     </td> *@
@*                     <td> *@
@*                       <span class="status-btn success-btn">@po.Status</span> *@
@*                     </td> *@
@*                     <td> *@
@*                       <button class="more-btn ml-10 dropdown-toggle text-gray" id="moreAction" data-bs-toggle="dropdown" aria-expanded="false" title="more"> *@
@*                         $1$ <i class="lni lni-more-alt"></i> #1# *@
@*                         <span class="mdi mdi-dots-vertical"></span> *@
@*                       </button> *@
@*                       <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="moreAction"> *@
@*                         <li class="dropdown-item"> *@
@*                           <a class="text-gray" href="/purchasing/list-order/PO-20230303-001">Details</a> *@
@*                         </li> *@
@*                         <li class="dropdown-item"> *@
@*                           <a class="text-gray" href="#" data-bs-toggle="modal" data-bs-target="#updateStatus">Switch Status</a> *@
@*                         </li> *@
@*                         <li class="dropdown-item"> *@
@*                           <a class="text-danger" href="#" data-bs-toggle="modal" data-bs-target="#delete">Delete</a> *@
@*                         </li> *@
@*                       </ul> *@
@*                     </td> *@
@*                   </tr> *@
@*                 } *@
@*                 </tbody> *@
@*               </table> *@
@*               <!-- end table --> *@
@*             </div> *@
@* *@
@*             <Paging/> *@
@* *@
@*           </div> *@
@*           <!-- end card --> *@
@*         </div> *@
@*         <!-- end col --> *@
@*       </div> *@
@*       <!-- end row --> *@
@*     </div> *@
@*     <!-- ========== tables-wrapper end ========== --> *@
@*   </div> *@
@*   <!-- end container --> *@
@* </section> *@

<TableSection Title="Purchase Order"
              Link="/purchasing"
              LinkText="Purchasing">
  <CustomComponent>
    <div class="d-flex align-items-center">
      <h6>Status:</h6>
      <div class="select-style-1 mb-0 ml-10">
        <div class="select-position">
          <select class="p-0 pe-5 border-0">
            <option value="" selected>Semua</option>
            <option value="1">Pending</option>
            <option value="2">Approved</option>
            <option value="3">Received</option>
            <option value="4">Rejected</option>
            <option value="5">Completed</option>
          </select>
        </div>
      </div>
    </div>
  </CustomComponent>
  <Thead>
    <tr>
      <th class="min-width">
        <h6>#</h6>
      </th>
      <th class="min-width">
        <h6>PO Number</h6>
      </th>
      <th class="min-width">
        <h6>PO Date</h6>
      </th>
      <th class="min-width">
        <h6>Vendor Target</h6>
      </th>
      <th class="min-width">
        <h6>Line Items</h6>
      </th>
      <th class="min-width">
        <h6>Total Amount</h6>
      </th>
      <th class="min-width">
        <h6>Status</h6>
      </th>
      <th>
        <h6>Action</h6>
      </th>
    </tr>
  </Thead>
  <Tbody>

  @{
    var index = 1;
  }
  @if (PurchaseOrders != null)
  {
    foreach (var po in PurchaseOrders)
    {
      <tr>
        <td>
          <p>@(index++)</p>
        </td>
        <td>
          <p>@po.PoNumber</p>
        </td>
        <td>
          <p>@po.PoDate</p>
        </td>
        <td>
          <p>@po.VendorTarget</p>
        </td>
        <td>
          <p>@po.LineItems</p>
        </td>
        <td>
          <p>@po.TotalAmount</p>
        </td>
        <td>
          <span class="status-btn success-btn">@po.Status</span>
        </td>
        <td>
          <button class="more-btn ml-10 dropdown-toggle text-gray" id="moreAction" data-bs-toggle="dropdown" aria-expanded="false" title="more">
            <span class="mdi mdi-dots-vertical"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="moreAction">
            <li class="dropdown-item">
              <a class="text-gray" href="/purchasing/list-order/@po.PoNumber">Details</a>
            </li>
            <li class="dropdown-item">
              <a class="text-gray" href="#" data-bs-toggle="modal" data-bs-target="#updateStatus">Switch Status</a>
            </li>
            <li class="dropdown-item">
              <a class="text-danger" href="#" data-bs-toggle="modal" data-bs-target="#delete">Delete</a>
            </li>
          </ul>
        </td>
      </tr>
    }
  }
  </Tbody>
</TableSection>

@* // Update Modal *@
<div class="warning-modal">
  <div class="modal fade" id="updateStatus" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <form class="modal-content card-style" action="/update" method="post">
        <div class="modal-header px-0 border-0">
          <h5 class="text-bold">Switch Status</h5>
          <button type="button" class="border-0 bg-transparent h1" data-bs-dismiss="modal">
            <i class="lni lni-cross-circle"></i>
          </button>
        </div>
        <div class="modal-body px-0">
          <div class="content mb-30">
            <div class="select-style-1 col rounded-sm">
              <label>Purchase Order Status</label>
              <div class="select-position">
                <select>
                  <option value="1">Pending</option>
                  <option value="2">Approve</option>
                  <option value="3">Receive</option>
                  <option value="4">Reject</option>
                  <option value="5">Complete</option>
                </select>
              </div>
            </div>
          </div>
          <div class="action d-flex flex-wrap justify-content-end">
            <button type="button" data-bs-dismiss="modal" class="main-btn danger-btn-outline btn-hover m-1">
              Cancel
            </button>
            <button type="submit" data-bs-dismiss="modal" class="main-btn primary-btn btn-hover m-1">
              Send
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<DeleteModal Target="#delete"/>

@code{

  public List<PurchaseOrderHeader>? PurchaseOrders { get; set; }

  protected override void OnInitialized()
  {
    PurchaseOrders = new List<PurchaseOrderHeader>
    {
      new PurchaseOrderHeader
      {
        PoheId = 1,
        PoNumber = "PO001",
        PoDate = new DateTime(2022, 3, 12),
        VendorTarget = "Vendor A",
        LineItems = 3,
        TotalAmount = 500000,
        Status = "Open"
      },
      new PurchaseOrderHeader
      {
        PoheId = 2,
        PoNumber = "PO002",
        PoDate = new DateTime(2022, 3, 13),
        VendorTarget = "Vendor B",
        LineItems = 2,
        TotalAmount = 700000,
        Status = "Closed"
      },
      new PurchaseOrderHeader
      {
        PoheId = 3,
        PoNumber = "PO003",
        PoDate = new DateTime(2022, 3, 14),
        VendorTarget = "Vendor C",
        LineItems = 4,
        TotalAmount = 900000,
        Status = "Open"
      },
      new PurchaseOrderHeader
      {
        PoheId = 4,
        PoNumber = "PO004",
        PoDate = new DateTime(2022, 3, 15),
        VendorTarget = "Vendor A",
        LineItems = 1,
        TotalAmount = 150000,
        Status = "Closed"
      },
      new PurchaseOrderHeader
      {
        PoheId = 5,
        PoNumber = "PO005",
        PoDate = new DateTime(2022, 3, 16),
        VendorTarget = "Vendor D",
        LineItems = 5,
        TotalAmount = 1200000,
        Status = "Open"
      }
    };
  }

}