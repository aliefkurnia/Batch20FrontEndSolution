@page "/purchasing/list-order"
@using Realta.Domain.RequestFeatures

<PageTitle>Purchase Order</PageTitle>

<TableSection Title="Purchase Order"
              Link="/purchasing"
              LinkText="Purchasing">
  <CustomComponent>
    <div class="d-flex align-items-center">
      <h6>Status:</h6>
      <div class="select-style-1 mb-0 ml-10">
        <div class="select-position">
          <select class="p-0 pe-5 border-0">
            <option value="" selected>Semua</option>
            <option value="1">Pending</option>
            <option value="2">Approved</option>
            <option value="3">Received</option>
            <option value="4">Rejected</option>
            <option value="5">Completed</option>
          </select>
        </div>
      </div>
    </div>
  </CustomComponent>
  
  <Topbar>
    <TableToolbar/>
  </Topbar>
  
  <Thead>
    <tr>
      <th class="min-width">
        <h6>#</h6>
      </th>
      <th class="min-width">
        <h6>PO Number</h6>
      </th>
      <th class="min-width">
        <h6>PO Date</h6>
      </th>
      <th class="min-width">
        <h6>Vendor Target</h6>
      </th>
      <th class="min-width">
        <h6>Line Items</h6>
      </th>
      <th class="min-width">
        <h6>Total Amount</h6>
      </th>
      <th class="min-width">
        <h6>Status</h6>
      </th>
      <th>
        <h6>Action</h6>
      </th>
    </tr>
  </Thead>
  <Tbody>

  @{
    var index = 1;
  }
  @if (PurchaseOrders != null)
  {
    foreach (var po in PurchaseOrders)
    {
      <tr>
        <td>
          <p>@(index++)</p>
        </td>
        <td>
          <p>@po.PoheNumber</p>
        </td>
        <td>
          <p>@po.PoheOrderDate</p>
        </td>
        <td>
          <p>@po.VendorName</p>
        </td>
        <td>
          <p>line items</p>
        </td>
        <td>
          <p>@(((decimal)po.PoheTotalAmount).ToString("C", new CultureInfo("id-ID")))</p>
        </td>
        <td>
          <span class="status-btn @GetStatus(@po.PoheStatus).Item1">@GetStatus(@po.PoheStatus).Item2</span>
        </td>
        <td>
          <button class="more-btn ml-10 dropdown-toggle text-gray" id="moreAction" data-bs-toggle="dropdown" aria-expanded="false" title="more">
            <span class="mdi mdi-dots-vertical"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="moreAction">
            <li class="dropdown-item">
              <a class="text-gray" href="/purchasing/list-order/@po.PoheNumber">Details</a>
            </li>
            <li class="dropdown-item">
              <a class="text-gray" href="#" data-bs-toggle="modal" data-bs-target="#updateStatus">Switch Status</a>
            </li>
            <li class="dropdown-item">
              <a class="text-danger" href="#" data-bs-toggle="modal" data-bs-target="#delete">Delete</a>
            </li>
          </ul>
        </td>
      </tr>
    }
  }
  </Tbody>
  <Pagination>
    <Paging MetaData="MetaData" Spread="2" SelectedPage="SelectedPage"/>
  </Pagination>
</TableSection>

@* // Update Modal *@
<div class="warning-modal">
  <div class="modal fade" id="updateStatus" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <form class="modal-content card-style" action="/update" method="post">
        <div class="modal-header px-0 border-0">
          <h5 class="text-bold">Switch Status</h5>
          <button type="button" class="border-0 bg-transparent h1" data-bs-dismiss="modal">
            <i class="lni lni-cross-circle"></i>
          </button>
        </div>
        <div class="modal-body px-0">
          <div class="content mb-30">
            <div class="select-style-1 col rounded-sm">
              <label>Purchase Order Status</label>
              <div class="select-position">
                <select>
                  <option value="1">Pending</option>
                  <option value="2">Approve</option>
                  <option value="3">Receive</option>
                  <option value="4">Reject</option>
                  <option value="5">Complete</option>
                </select>
              </div>
            </div>
          </div>
          <div class="action d-flex flex-wrap justify-content-end">
            <button type="button" data-bs-dismiss="modal" class="main-btn danger-btn-outline btn-hover m-1">
              Cancel
            </button>
            <button type="submit" data-bs-dismiss="modal" class="main-btn primary-btn btn-hover m-1">
              Send
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<DeleteModal Target="#delete"/>