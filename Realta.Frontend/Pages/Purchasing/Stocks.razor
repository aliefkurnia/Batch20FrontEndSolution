@page "/purchasing/stocks"
@using Realta.Domain.RequestFeatures
@using Realta.Frontend.Components.Purchasing

<TableSection Title="Stocks"
              Link="/purchasing"
              LinkText="Purchasing">
  <CustomComponent>
    <div class="d-flex align-items-center">
      <div class="select-style-1 mb-0 ml-10">
        <div class="select-position">
          <select class="p-0 pe-5 border-0">
            <option value="1" selected>High</option>
            <option value="1">Lowest</option>
          </select>
        </div>
      </div>
    </div>
  </CustomComponent>
  <Topbar>
        <TableToolbar Placeholder="Stock Name" OnSearchChanged="SearchChange" />
  </Topbar>
  <Thead>
    <tr>
      <th class="min-width">
        <h6>Stock</h6>
      </th>
      <th class="min-width">
        <h6>Re-OrderPoint</h6>
      </th>
      <th class="min-width">
        <h6>Qty</h6>
      </th>
      <th class="min-width">
        <h6>Used</h6>
      </th>
      <th class="min-width">
        <h6>Scrap</h6>
      </th>
      <th class="min-width">
        <h6>Size - Color</h6>
      </th>
      <th>
        <h6>
            <button style="border: 0; background-color: transparent;" data-bs-toggle="modal" data-bs-target="#createStock">
                <b>+ Add</b>
            </button>
         </h6>
      </th>
    </tr>
  </Thead>
  <Tbody>
    @if (stocksList != null)
        {
            foreach (var so in stocksList)
            {
              <tr>
                <td>
                  <p>@so.StockName</p>
                </td>
                <td>
                  <p>@so.StockReorderPoint</p>
                </td>
                <td>
                  <p>@so.StockQuantity</p>
                </td>
                <td>
                  <p>@so.StockUsed</p>
                </td>
                <td>
                  <p>@so.StockScrap</p>
                </td>
                <td>
                  <p>@so.StockSize - @so.StockColor</p>
                </td>
                <td>
                  <button class="more-btn ml-10 dropdown-toggle text-gray" id="moreAction" data-bs-toggle="dropdown" aria-expanded="false" title="more">
                    <span class="mdi mdi-dots-vertical"></span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="moreAction">
                    <li class="dropdown-item">
                      <a class="text-gray" data-bs-toggle="modal" data-bs-target="#editStock">Edit</a>
                    </li>
                    <li class="dropdown-item">
                      <a class="text-gray" data-bs-toggle="modal" data-bs-target="#uploadFotoStock[@so.StockId.Value]">Upload Foto</a>
                    </li>
                    <li class="dropdown-item">
                      <a class="text-danger" href="#" data-bs-toggle="modal" data-bs-target="#">Delete</a>
                    </li>
                    <li class="dropdown-item">
                      <a class="text-gray" href="/purchasing/stock/@so.StockId">Detail Stock</a>
                    </li>
                  </ul>
                </td>
              </tr>
                @* // Upload Foto Modal *@
                <ModalUploadFotoStock PhotoList="stocksPhotoList" Id="@so.StockId.Value" />    
               
        }
    }
  </Tbody>
  <Page>
        <Paging MetaData="MetaData" Spread="2" SelectedPage="SelectedPage" />
  </Page>
</TableSection>

@* // Update Modal *@
<div class="warning-modal">
    <div class="modal fade" id="editStock" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <form class="modal-content card-style" action="" method="post">
        <div class="modal-header px-0 border-0">
          <h5 class="text-bold">Edit Stock</h5>
          <button type="button" class="border-0 bg-transparent h1" data-bs-dismiss="modal">
            <i class="lni lni-cross-circle"></i>
          </button>
        </div>
        <div class="modal-body px-0">
          <div class="content mb-20">
            <div class="row">
                <div class="col-8">
                    <div class="input-style-1">
                        <label>Stock</label>
                        <input type="text">
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-style-1">
                        <label>Re-Order Point</label>
                        <input type="number">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                    <div class="input-style-1">
                        <label>Quantity</label>
                        <input type="number">
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-style-1">
                        <label>Used</label>
                        <input type="number">
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-style-1">
                         <label>Scrap</label>
                         <input type="number">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="input-style-1">
                        <label>Size</label>
                        <input type="text">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-style-1">
                        <label>Color</label>
                        <input type="text">
                    </div>
                </div>
            </div>
          </div>
          <div class="action d-flex flex-wrap justify-content-end">
            <button type="button" data-bs-dismiss="modal" class="main-btn danger-btn-outline btn-hover m-1">
              Cancel
            </button>
            <button type="submit" data-bs-dismiss="modal" class="main-btn primary-btn btn-hover m-1">
              Send
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

@* // Create Modal *@
<div class="warning-modal">
    <div class="modal fade" id="createStock" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <form class="modal-content card-style" action="/update" method="post">
                <div class="modal-header px-0 border-0">
                    <h5 class="text-bold">Add Stock</h5>
                    <button type="button" class="border-0 bg-transparent h1" data-bs-dismiss="modal">
                        <i class="lni lni-cross-circle"></i>
                    </button>
                </div>
                <div class="modal-body px-0">
                    <div class="content mb-20">
                        <div class="row">
                            <div class="col-8">
                                <div class="input-style-1">
                                    <label>Stock</label>
                                    <input type="text">
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="input-style-1">
                                    <label>Re-Order Point</label>
                                    <input type="number">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-4">
                                <div class="input-style-1">
                                    <label>Quantity</label>
                                    <input type="number">
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="input-style-1">
                                    <label>Used</label>
                                    <input type="number">
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="input-style-1">
                                    <label>Scrap</label>
                                    <input type="number">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div class="input-style-1">
                                    <label>Size</label>
                                    <input type="text">
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="input-style-1">
                                    <label>Color</label>
                                    <input type="text">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="action d-flex flex-wrap justify-content-end">
                        <button type="button" data-bs-dismiss="modal" class="main-btn danger-btn-outline btn-hover m-1">
                            Cancel
                        </button>
                        <button type="submit" data-bs-dismiss="modal" class="main-btn primary-btn btn-hover m-1">
                            Send
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>



<DeleteModal Target="#delete"/>